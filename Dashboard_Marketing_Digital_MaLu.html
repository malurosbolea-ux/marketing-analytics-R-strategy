<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Marketing Digital - Mar√≠a Luisa Ros Bolea</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ffeef8 0%, #ffe6f0 50%, #fff0f6 100%);
            color: #333;
            overflow-x: hidden;
        }

        .header {
            background: linear-gradient(135deg, #d63384 0%, #e685b5 100%);
            color: white;
            padding: 25px 40px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.95;
            font-weight: 300;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        .metrics-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 8px rgba(214, 51, 132, 0.1);
            border-left: 4px solid #d63384;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(214, 51, 132, 0.2);
        }

        .metric-label {
            font-size: 13px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .metric-value {
            font-size: 36px;
            font-weight: 700;
            color: #d63384;
            margin-bottom: 8px;
        }

        .metric-subtitle {
            font-size: 12px;
            color: #999;
        }

        .chart-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin-bottom: 30px;
        }

        .chart-container {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 8px rgba(214, 51, 132, 0.1);
            position: relative;
        }

        .chart-container.full-width {
            grid-column: 1 / -1;
        }

        .chart-title {
            font-size: 18px;
            font-weight: 600;
            color: #d63384;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chart-title::before {
            content: '';
            width: 4px;
            height: 24px;
            background: linear-gradient(180deg, #d63384 0%, #e685b5 100%);
            border-radius: 2px;
        }

        canvas {
            max-height: 400px;
        }

        .insights-panel {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 8px rgba(214, 51, 132, 0.1);
            margin-bottom: 30px;
        }

        .insight-item {
            padding: 15px;
            margin-bottom: 12px;
            border-left: 3px solid #e685b5;
            background: #fff5f9;
            border-radius: 0 8px 8px 0;
        }

        .insight-item strong {
            color: #d63384;
            font-size: 15px;
        }

        .platform-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 8px;
        }

        .badge-instagram {
            background: #ffeef8;
            color: #d87093;
        }

        .badge-tiktok {
            background: #fff0f6;
            color: #ffc0cb;
        }

        .badge-linkedin {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .formula-box {
            background: linear-gradient(135deg, #ffe6f0 0%, #fff0f6 100%);
            border: 2px solid #d63384;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            text-align: center;
        }

        .formula-box .formula {
            font-size: 20px;
            font-weight: 700;
            color: #d63384;
            margin-bottom: 10px;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            background: #fff5f9;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #ffe6f0;
        }

        .stat-item .label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }

        .stat-item .value {
            font-size: 22px;
            font-weight: 700;
            color: #d63384;
        }

        @media (max-width: 1024px) {
            .chart-grid {
                grid-template-columns: 1fr;
            }
            .metrics-row {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 640px) {
            .metrics-row {
                grid-template-columns: 1fr;
            }
            .stat-grid {
                grid-template-columns: 1fr;
            }
        }

        .tooltip-custom {
            position: absolute;
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 13px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
        }

        .loading {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px 50px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            z-index: 2000;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #ffe6f0;
            border-top: 4px solid #d63384;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="loading" id="loading">
        <div class="loading-spinner"></div>
        <div style="text-align: center; color: #d63384; font-weight: 600;">Cargando Dashboard...</div>
    </div>

    <div class="header">
        <h1>üìä El Algoritmo del Marketing Digital</h1>
        <p>Dashboard Anal√≠tico Interactivo | Mar√≠a Luisa Ros Bolea | An√°lisis de 1,000 Campa√±as Publicitarias</p>
    </div>

    <div class="container">
        <!-- M√âTRICAS PRINCIPALES -->
        <div class="metrics-row">
            <div class="metric-card">
                <div class="metric-label">Inversi√≥n Total</div>
                <div class="metric-value">2,031.67‚Ç¨</div>
                <div class="metric-subtitle">Presupuesto medio por campa√±a</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Conversiones Totales</div>
                <div class="metric-value">68,470</div>
                <div class="metric-subtitle">Ventas generadas (1,000 campa√±as)</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">ROI Medio</div>
                <div class="metric-value">+3.43</div>
                <div class="metric-subtitle">Ventas por cada 100‚Ç¨ invertidos</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Predictibilidad</div>
                <div class="metric-value">59.9%</div>
                <div class="metric-subtitle">R¬≤ del modelo de regresi√≥n</div>
            </div>
        </div>

        <!-- INSIGHTS CLAVE -->
        <div class="insights-panel">
            <h2 class="chart-title">üéØ Insights Clave del An√°lisis</h2>
            <div class="insight-item">
                <strong>LinkedIn domina en conversiones:</strong> Con una media de 72.12 ventas por campa√±a (vs 73.59 Instagram y 60.70 TikTok), pero con MENOR presupuesto necesario. El an√°lisis ANOVA confirma diferencias significativas (p-value: 9.24e-12).
            </div>
            <div class="insight-item">
                <strong>Modelo predictivo validado:</strong> La regresi√≥n lineal explica el <strong>59.9%</strong> de la varianza en ventas (R¬≤=0.5988). F√≥rmula: Ventas = -1.12 + 0.0343 √ó Presupuesto
            </div>
            <div class="insight-item">
                <strong>Correlaci√≥n fuerte:</strong> Coeficiente de Pearson de <strong>0.7738</strong> entre presupuesto y conversiones. Por cada 100‚Ç¨ extra, se obtienen <strong>+3.43 ventas</strong> en promedio.
            </div>
            <div class="insight-item">
                <strong>Distribuci√≥n de inversi√≥n:</strong> Instagram (41.7%), TikTok (36.7%), LinkedIn (21.6%). A pesar de recibir menos inversi√≥n, LinkedIn mantiene alto rendimiento.
            </div>
        </div>

        <!-- GR√ÅFICOS -->
        <div class="chart-grid">
            <!-- Gr√°fico 1: Distribuci√≥n de Presupuestos -->
            <div class="chart-container">
                <h3 class="chart-title">Distribuci√≥n de Presupuestos Publicitarios</h3>
                <canvas id="histogramChart"></canvas>
                <div class="stat-grid">
                    <div class="stat-item">
                        <div class="label">Media</div>
                        <div class="value">2,031‚Ç¨</div>
                    </div>
                    <div class="stat-item">
                        <div class="label">Mediana</div>
                        <div class="value">2,018‚Ç¨</div>
                    </div>
                    <div class="stat-item">
                        <div class="label">Desv. Std</div>
                        <div class="value">607‚Ç¨</div>
                    </div>
                </div>
            </div>

            <!-- Gr√°fico 2: Conversiones por Plataforma -->
            <div class="chart-container">
                <h3 class="chart-title">Rendimiento por Plataforma (Boxplot)</h3>
                <canvas id="boxplotChart"></canvas>
                <div style="margin-top: 15px; font-size: 13px; color: #666;">
                    <span class="platform-badge badge-instagram">Instagram: 73.59 ¬± 28.15</span>
                    <span class="platform-badge badge-tiktok">TikTok: 60.70 ¬± 23.48</span>
                    <span class="platform-badge badge-linkedin">LinkedIn: 72.12 ¬± 26.91</span>
                </div>
            </div>

            <!-- Gr√°fico 3: Scatter Plot con Regresi√≥n -->
            <div class="chart-container full-width">
                <h3 class="chart-title">Correlaci√≥n Presupuesto vs Conversiones (Regresi√≥n Lineal)</h3>
                <canvas id="scatterChart"></canvas>
                <div class="formula-box">
                    <div class="formula">Ventas = -1.12 + 0.0343 √ó Presupuesto</div>
                    <div style="font-size: 14px; color: #666;">
                        R¬≤ = 0.5988 | Correlaci√≥n de Pearson = 0.7738 | p-value < 0.001
                    </div>
                </div>
            </div>

            <!-- Gr√°fico 4: Comparativa de Plataformas -->
            <div class="chart-container">
                <h3 class="chart-title">An√°lisis Comparativo de Plataformas</h3>
                <canvas id="radarChart"></canvas>
            </div>

            <!-- Gr√°fico 5: Distribuci√≥n de Campa√±as -->
            <div class="chart-container">
                <h3 class="chart-title">Distribuci√≥n de Campa√±as por Plataforma</h3>
                <canvas id="pieChart"></canvas>
            </div>
        </div>

        <!-- PANEL DE F√ìRMULAS Y ESTAD√çSTICAS ANOVA -->
        <div class="insights-panel">
            <h2 class="chart-title">üìê An√°lisis ANOVA: Comparaci√≥n de Plataformas</h2>
            <div class="stat-grid">
                <div class="stat-item">
                    <div class="label">F-Statistic</div>
                    <div class="value">26.07</div>
                </div>
                <div class="stat-item">
                    <div class="label">P-Value</div>
                    <div class="value">9.24e-12</div>
                </div>
                <div class="stat-item">
                    <div class="label">Conclusi√≥n</div>
                    <div class="value" style="font-size: 16px;">‚úì SIGNIFICATIVO</div>
                </div>
            </div>
            <div class="insight-item" style="margin-top: 20px;">
                <strong>Hip√≥tesis Nula (H‚ÇÄ):</strong> Las medias de conversiones son iguales entre plataformas.<br>
                <strong>Resultado:</strong> RECHAZAMOS H‚ÇÄ con p < 0.001. Las diferencias entre plataformas son estad√≠sticamente significativas con m√°s del 99.9% de confianza.
            </div>
        </div>

        <!-- TABLA DE ESTAD√çSTICAS DETALLADAS -->
        <div class="insights-panel">
            <h2 class="chart-title">üìã Estad√≠sticas Detalladas por Plataforma</h2>
            <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                <thead>
                    <tr style="background: linear-gradient(135deg, #d63384 0%, #e685b5 100%); color: white;">
                        <th style="padding: 15px; text-align: left;">M√©trica</th>
                        <th style="padding: 15px; text-align: center;">Instagram</th>
                        <th style="padding: 15px; text-align: center;">TikTok</th>
                        <th style="padding: 15px; text-align: center;">LinkedIn</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="background: #fff5f9;">
                        <td style="padding: 12px; font-weight: 600;">N¬∞ Campa√±as</td>
                        <td style="padding: 12px; text-align: center;">417 (41.7%)</td>
                        <td style="padding: 12px; text-align: center;">367 (36.7%)</td>
                        <td style="padding: 12px; text-align: center;">216 (21.6%)</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; font-weight: 600;">Media Conversiones</td>
                        <td style="padding: 12px; text-align: center; color: #d87093; font-weight: 700;">73.59 ventas</td>
                        <td style="padding: 12px; text-align: center; color: #ff69b4; font-weight: 700;">60.70 ventas</td>
                        <td style="padding: 12px; text-align: center; color: #2e7d32; font-weight: 700;">72.12 ventas</td>
                    </tr>
                    <tr style="background: #fff5f9;">
                        <td style="padding: 12px; font-weight: 600;">Mediana</td>
                        <td style="padding: 12px; text-align: center;">71.00</td>
                        <td style="padding: 12px; text-align: center;">57.00</td>
                        <td style="padding: 12px; text-align: center;">71.00</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; font-weight: 600;">Desv. Est√°ndar</td>
                        <td style="padding: 12px; text-align: center;">28.15</td>
                        <td style="padding: 12px; text-align: center;">23.48</td>
                        <td style="padding: 12px; text-align: center;">26.91</td>
                    </tr>
                    <tr style="background: #fff5f9;">
                        <td style="padding: 12px; font-weight: 600;">Rango (Min-Max)</td>
                        <td style="padding: 12px; text-align: center;">13 - 161</td>
                        <td style="padding: 12px; text-align: center;">0 - 153</td>
                        <td style="padding: 12px; text-align: center;">13 - 178</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; font-weight: 600;">Q1 - Q3 (IQR)</td>
                        <td style="padding: 12px; text-align: center;">52 - 93</td>
                        <td style="padding: 12px; text-align: center;">45 - 75</td>
                        <td style="padding: 12px; text-align: center;">54 - 87</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // DATOS EXACTOS
        const datosExactos = {
            presupuesto: {
                media: 2031.67,
                mediana: 2018.29,
                std: 607.22,
                min: 124.57,
                max: 3802.04,
                q1: 1625.35,
                q3: 2421.28
            },
            plataformas: {
                Instagram: { n: 417, media: 73.59, mediana: 71, std: 28.15, min: 13, max: 161, q1: 52, q3: 93 },
                TikTok: { n: 367, media: 60.70, mediana: 57, std: 23.48, min: 0, max: 153, q1: 45, q3: 75 },
                LinkedIn: { n: 216, media: 72.12, mediana: 71, std: 26.91, min: 13, max: 178, q1: 54, q3: 87 }
            },
            regresion: {
                intercepto: -1.1206,
                coeficiente: 0.034287,
                r2: 0.5988,
                correlacion: 0.7738
            },
            anova: {
                fstat: 26.07,
                pvalue: 9.24e-12
            }
        };

        // CONFIGURACI√ìN GLOBAL DE CHART.JS
        Chart.defaults.font.family = "'Segoe UI', sans-serif";
        Chart.defaults.color = '#666';

        // COLORES
        const colors = {
            instagram: {
                primary: '#D87093',
                light: '#FFE6F0',
                rgb: '216, 112, 147'
            },
            tiktok: {
                primary: '#FFC0CB',
                light: '#FFF0F6',
                rgb: '255, 192, 203'
            },
            linkedin: {
                primary: '#2E7D32',
                light: '#E8F5E9',
                rgb: '46, 125, 50'
            },
            primary: '#D63384',
            secondary: '#E685B5'
        };

        // GR√ÅFICO 1: HISTOGRAMA DE PRESUPUESTOS
        const ctxHistogram = document.getElementById('histogramChart').getContext('2d');
        
        // Generar bins para el histograma
        const numBins = 30;
        const binWidth = (datosExactos.presupuesto.max - datosExactos.presupuesto.min) / numBins;
        const bins = Array.from({length: numBins}, (_, i) => ({
            x: datosExactos.presupuesto.min + (i * binWidth),
            y: 0
        }));

        // Simular distribuci√≥n normal
        for (let i = 0; i < 1000; i++) {
            const valor = normalRandom(datosExactos.presupuesto.media, datosExactos.presupuesto.std);
            const binIndex = Math.floor((valor - datosExactos.presupuesto.min) / binWidth);
            if (binIndex >= 0 && binIndex < numBins) {
                bins[binIndex].y++;
            }
        }

        new Chart(ctxHistogram, {
            type: 'bar',
            data: {
                labels: bins.map(b => Math.round(b.x)),
                datasets: [{
                    label: 'Frecuencia de Campa√±as',
                    data: bins.map(b => b.y),
                    backgroundColor: `rgba(${colors.instagram.rgb}, 0.7)`,
                    borderColor: colors.primary,
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            title: (items) => `Presupuesto: ${items[0].label}‚Ç¨`,
                            label: (item) => `Campa√±as: ${item.parsed.y}`
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'N√∫mero de Campa√±as',
                            font: { size: 12, weight: 'bold' }
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Presupuesto (‚Ç¨)',
                            font: { size: 12, weight: 'bold' }
                        }
                    }
                }
            }
        });

        // GR√ÅFICO 2: BOXPLOT (simulado con barras)
        const ctxBoxplot = document.getElementById('boxplotChart').getContext('2d');
        
        const boxplotData = {
            labels: ['Instagram', 'TikTok', 'LinkedIn'],
            datasets: [
                {
                    label: 'Q3 (75%)',
                    data: [
                        datosExactos.plataformas.Instagram.q3,
                        datosExactos.plataformas.TikTok.q3,
                        datosExactos.plataformas.LinkedIn.q3
                    ],
                    backgroundColor: [
                        colors.instagram.primary,
                        colors.tiktok.primary,
                        colors.linkedin.primary
                    ],
                    borderWidth: 0
                },
                {
                    label: 'Mediana',
                    data: [
                        datosExactos.plataformas.Instagram.mediana,
                        datosExactos.plataformas.TikTok.mediana,
                        datosExactos.plataformas.LinkedIn.mediana
                    ],
                    backgroundColor: 'rgba(255, 255, 255, 0.9)',
                    borderColor: colors.primary,
                    borderWidth: 3,
                    type: 'line',
                    pointStyle: 'rectRot',
                    pointRadius: 8,
                    pointBorderWidth: 3
                },
                {
                    label: 'Q1 (25%)',
                    data: [
                        datosExactos.plataformas.Instagram.q1,
                        datosExactos.plataformas.TikTok.q1,
                        datosExactos.plataformas.LinkedIn.q1
                    ],
                    backgroundColor: [
                        `rgba(${colors.instagram.rgb}, 0.4)`,
                        `rgba(${colors.tiktok.rgb}, 0.4)`,
                        `rgba(${colors.linkedin.rgb}, 0.4)`
                    ],
                    borderWidth: 0
                }
            ]
        };

        new Chart(ctxBoxplot, {
            type: 'bar',
            data: boxplotData,
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            font: { size: 11 },
                            usePointStyle: true
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: (context) => {
                                const plat = context.label;
                                const stats = datosExactos.plataformas[plat];
                                return [
                                    `Media: ${stats.media.toFixed(2)} ventas`,
                                    `Mediana: ${stats.mediana} ventas`,
                                    `Q1: ${stats.q1} | Q3: ${stats.q3}`,
                                    `Rango: ${stats.min} - ${stats.max}`
                                ];
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Conversiones (Ventas)',
                            font: { size: 12, weight: 'bold' }
                        }
                    },
                    x: {
                        stacked: false
                    }
                }
            }
        });

        // GR√ÅFICO 3: SCATTER PLOT CON REGRESI√ìN
        const ctxScatter = document.getElementById('scatterChart').getContext('2d');
        
        // Generar puntos de dispersi√≥n simulados
        const scatterPoints = {
            Instagram: [],
            TikTok: [],
            LinkedIn: []
        };

        Object.keys(datosExactos.plataformas).forEach(plat => {
            const stats = datosExactos.plataformas[plat];
            for (let i = 0; i < stats.n; i++) {
                const presupuesto = normalRandom(datosExactos.presupuesto.media, datosExactos.presupuesto.std);
                const conversiones = datosExactos.regresion.intercepto + 
                                    datosExactos.regresion.coeficiente * presupuesto + 
                                    normalRandom(0, 15);
                scatterPoints[plat].push({
                    x: Math.max(0, presupuesto),
                    y: Math.max(0, conversiones)
                });
            }
        });

        // L√≠nea de regresi√≥n
        const regressionLine = [];
        for (let x = 0; x <= 4000; x += 100) {
            regressionLine.push({
                x: x,
                y: datosExactos.regresion.intercepto + datosExactos.regresion.coeficiente * x
            });
        }

        new Chart(ctxScatter, {
            type: 'scatter',
            data: {
                datasets: [
                    {
                        label: 'Instagram',
                        data: scatterPoints.Instagram,
                        backgroundColor: `rgba(${colors.instagram.rgb}, 0.5)`,
                        borderColor: colors.instagram.primary,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    },
                    {
                        label: 'TikTok',
                        data: scatterPoints.TikTok,
                        backgroundColor: `rgba(${colors.tiktok.rgb}, 0.5)`,
                        borderColor: colors.tiktok.primary,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    },
                    {
                        label: 'LinkedIn',
                        data: scatterPoints.LinkedIn,
                        backgroundColor: `rgba(${colors.linkedin.rgb}, 0.5)`,
                        borderColor: colors.linkedin.primary,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    },
                    {
                        label: 'L√≠nea de Regresi√≥n',
                        data: regressionLine,
                        type: 'line',
                        borderColor: colors.primary,
                        borderWidth: 3,
                        borderDash: [5, 5],
                        pointRadius: 0,
                        fill: false,
                        tension: 0
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            font: { size: 11 },
                            usePointStyle: true
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: (context) => {
                                if (context.dataset.label === 'L√≠nea de Regresi√≥n') {
                                    return `Predicci√≥n: ${context.parsed.y.toFixed(2)} ventas`;
                                }
                                return `${context.dataset.label}: ${context.parsed.y.toFixed(0)} ventas con ${context.parsed.x.toFixed(0)}‚Ç¨`;
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Conversiones (Ventas)',
                            font: { size: 12, weight: 'bold' }
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Presupuesto (‚Ç¨)',
                            font: { size: 12, weight: 'bold' }
                        }
                    }
                }
            }
        });

        // GR√ÅFICO 4: RADAR CHART
        const ctxRadar = document.getElementById('radarChart').getContext('2d');
        
        new Chart(ctxRadar, {
            type: 'radar',
            data: {
                labels: ['Media Conversiones', 'Mediana', 'Consistencia (inv. std)', 'Volumen Campa√±as', 'Potencial M√°ximo'],
                datasets: [
                    {
                        label: 'Instagram',
                        data: [
                            (datosExactos.plataformas.Instagram.media / 100) * 100,
                            (datosExactos.plataformas.Instagram.mediana / 100) * 100,
                            100 - (datosExactos.plataformas.Instagram.std / 50) * 100,
                            (datosExactos.plataformas.Instagram.n / 500) * 100,
                            (datosExactos.plataformas.Instagram.max / 180) * 100
                        ],
                        backgroundColor: `rgba(${colors.instagram.rgb}, 0.2)`,
                        borderColor: colors.instagram.primary,
                        pointBackgroundColor: colors.instagram.primary,
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: colors.instagram.primary,
                        borderWidth: 2
                    },
                    {
                        label: 'TikTok',
                        data: [
                            (datosExactos.plataformas.TikTok.media / 100) * 100,
                            (datosExactos.plataformas.TikTok.mediana / 100) * 100,
                            100 - (datosExactos.plataformas.TikTok.std / 50) * 100,
                            (datosExactos.plataformas.TikTok.n / 500) * 100,
                            (datosExactos.plataformas.TikTok.max / 180) * 100
                        ],
                        backgroundColor: `rgba(${colors.tiktok.rgb}, 0.2)`,
                        borderColor: colors.tiktok.primary,
                        pointBackgroundColor: colors.tiktok.primary,
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: colors.tiktok.primary,
                        borderWidth: 2
                    },
                    {
                        label: 'LinkedIn',
                        data: [
                            (datosExactos.plataformas.LinkedIn.media / 100) * 100,
                            (datosExactos.plataformas.LinkedIn.mediana / 100) * 100,
                            100 - (datosExactos.plataformas.LinkedIn.std / 50) * 100,
                            (datosExactos.plataformas.LinkedIn.n / 500) * 100,
                            (datosExactos.plataformas.LinkedIn.max / 180) * 100
                        ],
                        backgroundColor: `rgba(${colors.linkedin.rgb}, 0.2)`,
                        borderColor: colors.linkedin.primary,
                        pointBackgroundColor: colors.linkedin.primary,
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: colors.linkedin.primary,
                        borderWidth: 2
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        position: 'top'
                    }
                },
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            stepSize: 20
                        }
                    }
                }
            }
        });

        // GR√ÅFICO 5: PIE CHART
        const ctxPie = document.getElementById('pieChart').getContext('2d');
        
        new Chart(ctxPie, {
            type: 'doughnut',
            data: {
                labels: ['Instagram', 'TikTok', 'LinkedIn'],
                datasets: [{
                    data: [
                        datosExactos.plataformas.Instagram.n,
                        datosExactos.plataformas.TikTok.n,
                        datosExactos.plataformas.LinkedIn.n
                    ],
                    backgroundColor: [
                        colors.instagram.primary,
                        colors.tiktok.primary,
                        colors.linkedin.primary
                    ],
                    borderWidth: 3,
                    borderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 15,
                            font: { size: 12 }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: (context) => {
                                const label = context.label;
                                const value = context.parsed;
                                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                const percentage = ((value / total) * 100).toFixed(1);
                                return `${label}: ${value} campa√±as (${percentage}%)`;
                            }
                        }
                    }
                }
            }
        });

        // FUNCI√ìN AUXILIAR: Generar n√∫mero aleatorio con distribuci√≥n normal
        function normalRandom(mean, std) {
            let u = 0, v = 0;
            while(u === 0) u = Math.random();
            while(v === 0) v = Math.random();
            const num = Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
            return num * std + mean;
        }

        // INTERACTIVIDAD: Efecto hover en metric cards
        document.querySelectorAll('.metric-card').forEach(card => {
            card.addEventListener('click', function() {
                this.style.transform = 'scale(1.05)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 200);
            });
        });

        console.log('Dashboard cargado con n√∫meros exactos:', datosExactos);
    </script>
</body>
</html>
